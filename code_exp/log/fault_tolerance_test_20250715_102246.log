2025-07-15 10:22:46,010 - INFO - === Starting Node Fault Recovery Test ===
2025-07-15 10:22:46,011 - INFO - Setting up fault tolerance test environment...
2025-07-15 10:22:46,011 - INFO - Starting node 0 on port 8545...
2025-07-15 10:22:46,011 - ERROR - Port 8545 is already in use. Cannot start node 0.
2025-07-15 10:22:46,011 - INFO - Starting node 1 on port 8546...
2025-07-15 10:22:48,024 - ERROR - Failed to start node 1
2025-07-15 10:22:48,024 - INFO - Starting node 2 on port 8547...
2025-07-15 10:22:51,383 - INFO - Node 2 started successfully on port 8547
2025-07-15 10:22:51,383 - INFO - Starting node 3 on port 8548...
2025-07-15 10:22:51,383 - ERROR - Port 8548 is already in use. Cannot start node 3.
2025-07-15 10:22:51,383 - WARNING - Only 1 out of 4 nodes started successfully
2025-07-15 10:22:51,416 - INFO - Successfully connected to node 2 and deployed contract at 0x5FbDB2315678afecb367f032d93F642f64180aa3
2025-07-15 10:22:51,416 - INFO - Connected to 1 nodes
2025-07-15 10:22:51,416 - INFO - Starting fault tolerance test suite...
2025-07-15 10:22:51,416 - INFO - Running test scenario: Normal Operation with 4/4 active nodes
2025-07-15 10:22:51,421 - WARNING - Only 2 nodes are running, starting missing nodes...
2025-07-15 10:22:51,421 - INFO - Starting node 0 on port 8545...
2025-07-15 10:22:51,421 - ERROR - Port 8545 is already in use. Cannot start node 0.
2025-07-15 10:22:51,422 - INFO - Node 1 is already running
2025-07-15 10:22:51,423 - INFO - Node 2 is already running
2025-07-15 10:22:51,423 - INFO - Starting node 3 on port 8548...
2025-07-15 10:22:51,423 - ERROR - Port 8548 is already in use. Cannot start node 3.
2025-07-15 10:22:56,436 - ERROR - Not enough nodes running. Need 4, have 2
2025-07-15 10:23:06,439 - INFO - Running test scenario: Single Node Failure with 3/4 active nodes
2025-07-15 10:23:06,450 - WARNING - Only 2 nodes are running, starting missing nodes...
2025-07-15 10:23:06,451 - INFO - Starting node 0 on port 8545...
2025-07-15 10:23:06,451 - ERROR - Port 8545 is already in use. Cannot start node 0.
2025-07-15 10:23:06,455 - INFO - Node 1 is already running
2025-07-15 10:23:06,458 - INFO - Node 2 is already running
2025-07-15 10:23:06,458 - INFO - Starting node 3 on port 8548...
2025-07-15 10:23:06,458 - ERROR - Port 8548 is already in use. Cannot start node 3.
2025-07-15 10:23:11,473 - ERROR - Not enough nodes running. Need 3, have 2
2025-07-15 10:23:21,479 - INFO - Running test scenario: Double Node Failure with 2/4 active nodes
2025-07-15 10:23:21,492 - WARNING - Only 2 nodes are running, starting missing nodes...
2025-07-15 10:23:21,492 - INFO - Starting node 0 on port 8545...
2025-07-15 10:23:21,492 - ERROR - Port 8545 is already in use. Cannot start node 0.
2025-07-15 10:23:21,497 - INFO - Node 1 is already running
2025-07-15 10:23:21,499 - INFO - Node 2 is already running
2025-07-15 10:23:21,499 - INFO - Starting node 3 on port 8548...
2025-07-15 10:23:21,500 - ERROR - Port 8548 is already in use. Cannot start node 3.
2025-07-15 10:23:26,541 - INFO - Transaction 1/50 successful on node 2
2025-07-15 10:23:27,068 - INFO - Transaction 2/50 successful on node 2
2025-07-15 10:23:27,601 - INFO - Transaction 3/50 successful on node 2
2025-07-15 10:23:28,132 - INFO - Transaction 4/50 successful on node 2
2025-07-15 10:23:28,664 - INFO - Transaction 5/50 successful on node 2
2025-07-15 10:23:29,195 - INFO - Transaction 6/50 successful on node 2
2025-07-15 10:23:29,700 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:29,700 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:29,700 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:29,700 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:29,730 - INFO - Transaction 11/50 successful on node 2
2025-07-15 10:23:30,260 - INFO - Transaction 12/50 successful on node 2
2025-07-15 10:23:30,765 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:30,792 - INFO - Transaction 14/50 successful on node 2
2025-07-15 10:23:31,324 - INFO - Transaction 15/50 successful on node 2
2025-07-15 10:23:31,829 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:31,830 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:31,830 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:31,830 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:31,830 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:31,830 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:31,858 - INFO - Transaction 22/50 successful on node 2
2025-07-15 10:23:32,363 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:32,363 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:32,364 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:32,388 - INFO - Transaction 26/50 successful on node 2
2025-07-15 10:23:32,893 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:32,919 - INFO - Transaction 28/50 successful on node 2
2025-07-15 10:23:33,451 - INFO - Transaction 29/50 successful on node 2
2025-07-15 10:23:33,980 - INFO - Transaction 30/50 successful on node 2
2025-07-15 10:23:34,486 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:34,510 - INFO - Transaction 32/50 successful on node 2
2025-07-15 10:23:35,043 - INFO - Transaction 33/50 successful on node 2
2025-07-15 10:23:35,549 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:35,573 - INFO - Transaction 35/50 successful on node 2
2025-07-15 10:23:36,100 - INFO - Transaction 36/50 successful on node 2
2025-07-15 10:23:36,633 - INFO - Transaction 37/50 successful on node 2
2025-07-15 10:23:37,138 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:37,138 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:37,138 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:37,159 - INFO - Transaction 41/50 successful on node 2
2025-07-15 10:23:37,691 - INFO - Transaction 42/50 successful on node 2
2025-07-15 10:23:38,219 - INFO - Transaction 43/50 successful on node 2
2025-07-15 10:23:38,724 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:38,750 - INFO - Transaction 45/50 successful on node 2
2025-07-15 10:23:39,255 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:39,278 - INFO - Transaction 47/50 successful on node 2
2025-07-15 10:23:39,783 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:23:39,811 - INFO - Transaction 49/50 successful on node 2
2025-07-15 10:23:40,341 - INFO - Transaction 50/50 successful on node 2
2025-07-15 10:23:40,846 - INFO - Fault period complete. Availability: 54.00%
2025-07-15 10:23:40,846 - INFO - Successful transactions: 27/50
2025-07-15 10:23:40,846 - INFO - Waiting 15.7 seconds to complete fault duration...
2025-07-15 10:23:56,528 - INFO - Waiting for nodes to sync...
2025-07-15 10:24:06,553 - INFO - Verifying data consistency across nodes...
2025-07-15 10:24:06,579 - INFO - Data consistency check passed
2025-07-15 10:24:06,580 - INFO - Test scenario complete: Double Node Failure
2025-07-15 10:24:06,580 - INFO - Results: {'scenario': 'Double Node Failure', 'active_nodes': 2, 'total_nodes': 4, 'fault_duration': 30, 'availability': 0.54, 'successful_txs': 27, 'failed_txs': 23, 'recovery_time': 10.025264024734497, 'sync_complete': True, 'data_consistent': True}
2025-07-15 10:24:16,585 - INFO - Running test scenario: Extreme Failure with 1/4 active nodes
2025-07-15 10:24:16,612 - WARNING - Only 2 nodes are running, starting missing nodes...
2025-07-15 10:24:16,612 - INFO - Starting node 0 on port 8545...
2025-07-15 10:24:16,612 - ERROR - Port 8545 is already in use. Cannot start node 0.
2025-07-15 10:24:16,615 - INFO - Node 1 is already running
2025-07-15 10:24:16,617 - INFO - Node 2 is already running
2025-07-15 10:24:16,617 - INFO - Starting node 3 on port 8548...
2025-07-15 10:24:16,617 - ERROR - Port 8548 is already in use. Cannot start node 3.
2025-07-15 10:24:21,638 - INFO - Shutting down node 2 for fault simulation
2025-07-15 10:24:21,642 - INFO - Stopping node 2...
2025-07-15 10:24:21,654 - INFO - Node 2 stopped successfully
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,654 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - WARNING - No connection to node 1, skipping transaction
2025-07-15 10:24:21,655 - INFO - Fault period complete. Availability: 0.00%
2025-07-15 10:24:21,655 - INFO - Successful transactions: 0/50
2025-07-15 10:24:21,655 - INFO - Waiting 30.0 seconds to complete fault duration...
2025-07-15 10:24:51,660 - INFO - Restarting node 2
2025-07-15 10:24:51,662 - INFO - Starting node 2 on port 8547...
2025-07-15 10:24:53,679 - ERROR - Failed to start node 2
2025-07-15 10:24:53,679 - INFO - Waiting for nodes to sync...
2025-07-15 10:25:03,710 - INFO - Verifying data consistency across nodes...
2025-07-15 10:25:03,739 - INFO - Data consistency check passed
2025-07-15 10:25:03,739 - INFO - Test scenario complete: Extreme Failure
2025-07-15 10:25:03,739 - INFO - Results: {'scenario': 'Extreme Failure', 'active_nodes': 1, 'total_nodes': 4, 'fault_duration': 30, 'availability': 0.0, 'successful_txs': 0, 'failed_txs': 50, 'recovery_time': 12.05062222480774, 'sync_complete': True, 'data_consistent': True}
2025-07-15 10:25:13,762 - INFO - Results saved to /Users/yangzongyou/Downloads/iccip 2022/code_exp/data/fault_tolerance_test.csv
2025-07-15 10:25:13,762 - INFO - Cleaning up resources...
2025-07-15 10:25:13,766 - INFO - Stopping node 1...
2025-07-15 10:25:13,778 - INFO - Node 1 stopped successfully
2025-07-15 10:25:13,781 - INFO - Stopping node 2...
2025-07-15 10:25:13,787 - INFO - Node 2 stopped successfully
2025-07-15 10:25:13,787 - INFO - All nodes stopped
2025-07-15 10:25:13,787 - INFO - === Node Fault Recovery Test Complete ===
