2025-07-15 15:15:25,784 - INFO - ====== 开始运行实验 3 ======
2025-07-15 15:15:25,784 - INFO - Log file: /Users/yangzongyou/Downloads/iccip 2022/code_exp/log/experiment3_20250715_151525.log
2025-07-15 15:15:30,801 - INFO - Connected to Web3. Default account: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
2025-07-15 15:15:30,802 - INFO - Blockchain helper initialized.
2025-07-15 15:15:30,802 - INFO - Loading dataset...
2025-07-15 15:15:30,814 - INFO - Creating contract factory...
2025-07-15 15:15:30,816 - INFO - Deploying contract...
2025-07-15 15:15:30,816 - INFO - Deploying Certificate_Exp123...
2025-07-15 15:15:30,826 - INFO - Certificate_Exp123 deployed at 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512. Gas used: 620351
2025-07-15 15:15:30,826 - INFO - Contract deployed at 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512.
2025-07-15 15:15:30,826 - INFO - Starting experiment function: run_experiment_3_scalability...
2025-07-15 15:15:30,826 - INFO - --- Starting Experiment 3: Scalability Test ---
2025-07-15 15:15:30,826 - INFO - Issuing 10000 new certificates to reach 10000 total records...
2025-07-15 15:15:30,846 - ERROR - 实验 3 运行失败: execution reverted: Error: VM Exception while processing transaction: reverted with reason string 'Caller is not an authorized institution'
Traceback (most recent call last):
  File "/Users/yangzongyou/Downloads/iccip 2022/code_exp/scripts/temp_exp3.py", line 69, in <module>
    main_logic()
  File "/Users/yangzongyou/Downloads/iccip 2022/code_exp/scripts/temp_exp3.py", line 60, in main_logic
    run_experiment_3_scalability(helper, contract, dataset)
  File "/Users/yangzongyou/Downloads/iccip 2022/code_exp/scripts/simulation.py", line 222, in run_experiment_3_scalability
    tx_hash = contract.functions.issueCertificate(Web3.to_bytes(hexstr=cert_hash)).transact()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/contract/contract.py", line 323, in transact
    return transact_with_contract_function(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/contract/utils.py", line 172, in transact_with_contract_function
    txn_hash = w3.eth.send_transaction(transact_transaction)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/eth/eth.py", line 380, in send_transaction
    return self._send_transaction(transaction)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/module.py", line 75, in caller
    result = w3.manager.request_blocking(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/manager.py", line 324, in request_blocking
    response = self._make_request(method, params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/manager.py", line 212, in _make_request
    return request_func(method, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/middleware/gas_price_strategy.py", line 100, in middleware
    return make_request(method, (transaction,))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/middleware/formatting.py", line 126, in middleware
    response = make_request(method, params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/middleware/attrdict.py", line 43, in middleware
    response = make_request(method, params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/middleware/formatting.py", line 126, in middleware
    response = make_request(method, params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/middleware/formatting.py", line 126, in middleware
    response = make_request(method, params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/middleware/buffered_gas_estimate.py", line 40, in middleware
    hex(get_buffered_gas_estimate(w3, transaction)),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/_utils/transactions.py", line 154, in get_buffered_gas_estimate
    gas_estimate = w3.eth.estimate_gas(gas_estimate_transaction)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/eth/eth.py", line 310, in estimate_gas
    return self._estimate_gas(transaction, block_identifier)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/module.py", line 75, in caller
    result = w3.manager.request_blocking(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/manager.py", line 325, in request_blocking
    return self.formatted_response(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/manager.py", line 286, in formatted_response
    apply_error_formatters(error_formatters, response)
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/manager.py", line 103, in apply_error_formatters
    formatted_resp = pipe(response, error_formatters)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "cytoolz/functoolz.pyx", line 685, in cytoolz.functoolz.pipe
  File "cytoolz/functoolz.pyx", line 660, in cytoolz.functoolz.c_pipe
  File "/opt/anaconda3/envs/cmbi/lib/python3.11/site-packages/web3/_utils/contract_error_handling.py", line 154, in raise_contract_logic_error_on_revert
    raise ContractLogicError(f"execution reverted: {message}", data=data)
web3.exceptions.ContractLogicError: execution reverted: Error: VM Exception while processing transaction: reverted with reason string 'Caller is not an authorized institution'
